{"version":3,"file":"itemsgroup.js","sourceRoot":"","sources":["../ts/itemsgroup.ts"],"names":[],"mappings":"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","sourcesContent":["import Component from 'vue-class-component'\nimport BaseVueJS from './diapslib';\n@Component({\n\tname:'itemsgroup',\n\ttemplate: '#items-group-template',\n\tprops: [\"itemsGroupTitle\", \"itemsGroupPrefix\", \"itemsGroupItems\", \"itemsGroupDys\"]\n})\nexport default class ItemsGroupComponent extends BaseVueJS {\n\teditedBilanItem: any = null\n\tscrollPosition: number = 0\n\n\teditBilanItem(bilanItem: Object) {\n\t\tthis.scrollPosition = window.pageYOffset;\n\t\tthis.editedBilanItem = this.deepCopy(bilanItem);\n\t\tthis.$nextTick(function() { (<HTMLElement>this.$refs['description']).focus(); });\n\t}\n\n\tcancelEditBilanItem() {\n\t\tthis.editedBilanItem = null;\n\t\tthis.$nextTick(function() {\n\t\t\twindow.scrollTo(0, this.$data.scrollPosition);\n\t\t})\n\t}\n\tupdateBilanItem() {\n\t\tthis.callApi('/apis/bilan/item/update', this.editedBilanItem).then(this.onUpdatedBilanItem);\n\t}\n\tonUpdatedBilanItem(result: any) {\n\t\tthis.$emit(\"reload\", this.cancelEditBilanItem);\n\t}\n\tformeTotal(allItems: any, itemsGroupDys: boolean): number {\n\t\tvar result: number = 0;\n\t\tfor (let key of Object.keys(allItems)) {\n\t\t\tconst items = allItems[key];\n\t\t\titems.forEach((bilanItem: any) => {\n\t\t\t\tif (itemsGroupDys) {\n\t\t\t\t\tresult += bilanItem.note * bilanItem.item.dysRate;\n\t\t\t\t} else {\n\t\t\t\t\tresult += bilanItem.note * bilanItem.item.rate;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn result;\n\t}\n\titemLabel(bilanItem: any): string {\n\t\tvar result: string;\n\t\tif (this.$props['itemsGroupDys']) {\n\t\t\tresult = '' + bilanItem.item.dysNumber;\n\t\t\tif (bilanItem.item.category != 'OTHER') {\n\t\t\t\tresult += ' (' + this.getPrefix(bilanItem.item) + '' + bilanItem.item.number + ')';\n\t\t\t}\n\t\t} else {\n\t\t\tresult = this.getPrefix(bilanItem.item) + '' + bilanItem.item.number;\n\t\t}\n\t\treturn result;\n\t}\n\tgetPrefix(item: any): string {\n\t\treturn item.category == 'EF' ? 'F' : 'M';\n\t}\n}\n\n"]}