{"version":3,"file":"personnes.js","sourceRoot":"","sources":["../ts/personnes.ts"],"names":[],"mappings":"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","sourcesContent":["import moment from 'moment';\n\nimport Vue from 'vue';\nimport Component from 'vue-class-component'\nimport BaseVueJS from './diapslib';\n\n\n@Component({\n\tfilters: {\n\t\tfrenchDate: function(dateISO: string): string {\n\t\t\treturn moment(dateISO, 'YYYY-MM-DD').format(\"DD/MM/YYYY\");\n\t\t}\n\t}\n})\nclass PersonnesScreen extends BaseVueJS {\n\tpersonnes: any[] = new Array()\n\tstate: string = 'list'\n\tcurrentPersonne: any = {}\n\tdisplayDeleteConfirmation: boolean = false\n\tmounted() {\n\t\tdocument.querySelector(\"main.container\")!.classList.remove(\"is-hidden\");\n\t\tthis.refresh();\n\t}\n\trefresh(): Promise<Object[]> {\n\t\treturn new Promise<any>((resolve, reject) => {\n\t\t\tthis.callApi('/apis/personnes/all').then((result) => {\n\t\t\t\tthis.$data.personnes = result;\n\t\t\t\tthis.showList();\n\t\t\t\tresolve(undefined);\n\t\t\t});\n\t\t});\n\t}\n\tsubmit() {\n\t\tvar url = this.state == 'add' ? '/apis/personnes/add' : '/apis/personnes/update';\n\t\tthis.callApi(url, this.currentPersonne).then(this.refresh);\n\t}\n\tshowFormEdit(personne: Object) {\n\t\tthis.state = 'edit';\n\t\tthis.currentPersonne = this.deepCopy(personne);\n\t\tVue.nextTick(() => {\n\t\t\t(<HTMLInputElement>this.$refs.dateReport).focus();\n\t\t});\n\t}\n\tshowFormAdd() {\n\t\tthis.state = 'add';\n\t\tthis.currentPersonne = new Object();\n\t\tVue.nextTick(() => {\n\t\t\t(<HTMLInputElement>this.$refs.dateReport).focus();\n\t\t});\n\t}\n\tshowList() {\n\t\tthis.state = 'list';\n\t\tthis.currentPersonne = new Object();\n\t}\n\tcancel() {\n\t\tthis.showList();\n\t}\n\tremove(personne: Object) {\n\t\tthis.currentPersonne = personne;\n\t\tthis.displayDeleteConfirmation = true;\n\t}\n\tconfirmDelete() {\n\t\tthis.displayDeleteConfirmation = false;\n\t\tthis.callApi(\"/apis/personnes/del\", this.currentPersonne).then(this.refresh);\n\t}\n\tcancelDelete() {\n\t\tthis.displayDeleteConfirmation = false;\n\t\tthis.showList();\n\t}\n};\n\nwindow.onload = function() {\n\tnew PersonnesScreen({ el: 'main' });\n};\n\n\n"]}